Ecoroof Analysis by Alex Vijay Bans 

Introduction
Methods

	This project uses the following libraries: Tidyverse, Janitor, Fedmatch, Lubridate, and bansr. Dependencies were managed with Renv (see project .lock file).

	Data first had to be uploaded and tidied in a form to be able to be processed. First, rain data was uploaded, and cleaned. The data was filtered by the start (09/01/2018) and end (06/01/2019) dates of the project. Additionally, the month of October was removed due to sensor malfunctioning (rain$full). Rain data was then parsed into discrete storm events (storms) that had at least 5.08 mm of rain, with an interevent period of 24 hours (rain$storms). Parsing the flow from the roofs was difficult as there was a lag between rainfall and discharge. Thus, all data were separated from the start of the first event, to the start of the next event (storms), instead of the start of the first event to the end of the first event. 
	
	Discharge (Q) from the conventional roof (flow$con) and the eco roof (flow$eco) were uploaded and cleaned before being combined together (flow$roof). Data was filtered by project start date and end date, as well as the month of October as well, due to instrument failure, and its subsequent replacement. Discharges were then separated into rain events.
	
		Stormwater runoff metal sample concentrations were uploaded (chemistry$metals), tidied, and converted to ppm from ppb. Nutrient data (chemistry$nutrients) were uploaded and also tidied. Metals data and nutrients data were combined (chemistry$full) and filtered by the project start date, project end date, and month of October. 
		
			The runoff samples collected were flow-weight based, meaning they were collected after certain volumes of discharge occurred. This is different than time based samples which are collected in intervals of duration. Flow weighted samples take into account the quantity of discharge. You can thus assume the concentrations sampled at each discrete volume of discharge is representative of the average concentration of that discharged volume of water. For every flow-weighted sample in a storm event, the geometric mean was taken to determine the flow weighted event mean concentration (EMC). The geometric mean was used as it helps estimate the central tendency of the values while taking the interrelatedness of the values. The EMC values were then added to the flow data via joining left joining with the discharge data sets. 
			
			Taking the EMC * Q at each time interval gives us the mass flow rate (M dot). When, you normalize the mass flow rate by the surface area of the roof (catch_size), you get the mass flux (j). Finally, Integrating j with respect to time gives us area density (Pa) or load. Integrating j with respect to time was accomplished by taking the interval of date between one observation and the next observation (300 seconds), and multiplying the average of their j values. 
			
UNIT DESCRIPTIONS: 
The Conventional roof is always known as "con", the ecoroof is always known as "eco". 
